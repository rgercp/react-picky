"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var React=require("react"),React__default=_interopDefault(React),PropTypes=require("prop-types"),PropTypes__default=_interopDefault(PropTypes),commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var FUNC_ERROR_TEXT="Expected a function",NAN=NaN,symbolTag="[object Symbol]",reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,freeGlobal="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),objectProto=Object.prototype,objectToString=objectProto.toString,nativeMax=Math.max,nativeMin=Math.min,now=function(){return root.Date.now()};function debounce(e,t,r){var n,o,i,s,a,l,u=0,c=!1,p=!1,f=!0;if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT);t=toNumber(t)||0,isObject(r)&&(c=!!r.leading,i=(p="maxWait"in r)?nativeMax(toNumber(r.maxWait)||0,t):i,f="trailing"in r?!!r.trailing:f);function d(t){var r=n,i=o;return n=o=void 0,u=t,s=e.apply(i,r)}function h(e){var r=e-l;return void 0===l||r>=t||r<0||p&&e-u>=i}function _(){var e=now();if(h(e))return y(e);a=setTimeout(_,function(e){var r=t-(e-l);return p?nativeMin(r,i-(e-u)):r}(e))}function y(e){return a=void 0,f&&n?d(e):(n=o=void 0,s)}function m(){var e=now(),r=h(e);if(n=arguments,o=this,l=e,r){if(void 0===a)return u=i=l,a=setTimeout(_,t),c?d(i):s;if(p)return a=setTimeout(_,t),d(l)}var i;return void 0===a&&(a=setTimeout(_,t)),s}return m.cancel=function(){void 0!==a&&clearTimeout(a),u=0,n=l=o=a=void 0},m.flush=function(){return void 0===a?s:y(now())},m}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isObjectLike(e){return!!e&&"object"==typeof e}function isSymbol(e){return"symbol"==typeof e||isObjectLike(e)&&objectToString.call(e)==symbolTag}function toNumber(e){if("number"==typeof e)return e;if(isSymbol(e))return NAN;if(isObject(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=isObject(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(reTrim,"");var r=reIsBinary.test(e);return r||reIsOctal.test(e)?freeParseInt(e.slice(2),r?2:8):reIsBadHex.test(e)?NAN:+e}var lodash_debounce=debounce,extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};function __extends(e,t){extendStatics(e,t);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var __assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e};function __rest(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]])}return r}var _a,_b,_c,ALIGN_AUTO="auto",ALIGN_START="start",ALIGN_CENTER="center",ALIGN_END="end",DIRECTION_VERTICAL="vertical",DIRECTION_HORIZONTAL="horizontal",SCROLL_CHANGE_OBSERVED="observed",SCROLL_CHANGE_REQUESTED="requested",scrollProp=(_a={},_a[DIRECTION_VERTICAL]="scrollTop",_a[DIRECTION_HORIZONTAL]="scrollLeft",_a),sizeProp=(_b={},_b[DIRECTION_VERTICAL]="height",_b[DIRECTION_HORIZONTAL]="width",_b),positionProp=(_c={},_c[DIRECTION_VERTICAL]="top",_c[DIRECTION_HORIZONTAL]="left",_c),SizeAndPositionManager=function(){function e(e){var t=e.itemCount,r=e.itemSizeGetter,n=e.estimatedItemSize;this.itemSizeGetter=r,this.itemCount=t,this.estimatedItemSize=n,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1}return e.prototype.updateConfig=function(e){var t=e.itemCount,r=e.estimatedItemSize;this.itemCount=t,this.estimatedItemSize=r},e.prototype.getLastMeasuredIndex=function(){return this.lastMeasuredIndex},e.prototype.getSizeAndPositionForIndex=function(e){if(e<0||e>=this.itemCount)throw Error("Requested index "+e+" is outside of range 0.."+this.itemCount);if(e>this.lastMeasuredIndex){for(var t=this.getSizeAndPositionOfLastMeasuredItem(),r=t.offset+t.size,n=this.lastMeasuredIndex+1;n<=e;n++){var o=this.itemSizeGetter(n);if(null==o||isNaN(o))throw Error("Invalid size returned for index "+n+" of value "+o);this.itemSizeAndPositionData[n]={offset:r,size:o},r+=o}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]},e.prototype.getSizeAndPositionOfLastMeasuredItem=function(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}},e.prototype.getTotalSize=function(){var e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.itemCount-this.lastMeasuredIndex-1)*this.estimatedItemSize},e.prototype.getUpdatedOffsetForIndex=function(e){var t=e.align,r=void 0===t?ALIGN_START:t,n=e.containerSize,o=e.currentOffset,i=e.targetIndex;if(n<=0)return 0;var s,a=this.getSizeAndPositionForIndex(i),l=a.offset,u=l-n+a.size;switch(r){case ALIGN_END:s=u;break;case ALIGN_CENTER:s=l-(n-a.size)/2;break;case ALIGN_START:s=l;break;default:s=Math.max(u,Math.min(l,o))}var c=this.getTotalSize();return Math.max(0,Math.min(c-n,s))},e.prototype.getVisibleRange=function(e){var t=e.containerSize,r=e.offset,n=e.overscanCount;if(0===this.getTotalSize())return{};var o=r+t,i=this.findNearestItem(r);if(void 0===i)throw Error("Invalid offset "+r+" specified");var s=this.getSizeAndPositionForIndex(i);r=s.offset+s.size;for(var a=i;r<o&&a<this.itemCount-1;)a++,r+=this.getSizeAndPositionForIndex(a).size;return n&&(i=Math.max(0,i-n),a=Math.min(a+n,this.itemCount-1)),{start:i,stop:a}},e.prototype.resetItem=function(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)},e.prototype.findNearestItem=function(e){if(isNaN(e))throw Error("Invalid offset "+e+" specified");e=Math.max(0,e);var t=this.getSizeAndPositionOfLastMeasuredItem(),r=Math.max(0,this.lastMeasuredIndex);return t.offset>=e?this.binarySearch({high:r,low:0,offset:e}):this.exponentialSearch({index:r,offset:e})},e.prototype.binarySearch=function(e){for(var t=e.low,r=e.high,n=e.offset,o=0,i=0;t<=r;){if(o=t+Math.floor((r-t)/2),(i=this.getSizeAndPositionForIndex(o).offset)===n)return o;i<n?t=o+1:i>n&&(r=o-1)}return t>0?t-1:0},e.prototype.exponentialSearch=function(e){for(var t=e.index,r=e.offset,n=1;t<this.itemCount&&this.getSizeAndPositionForIndex(t).offset<r;)t+=n,n*=2;return this.binarySearch({high:Math.min(t,this.itemCount-1),low:Math.floor(t/2),offset:r})},e}(),STYLE_WRAPPER={overflow:"auto",willChange:"transform",WebkitOverflowScrolling:"touch"},STYLE_INNER={position:"relative",overflow:"hidden",width:"100%",minHeight:"100%"},STYLE_ITEM={position:"absolute",left:0,width:"100%"},VirtualList=function(e){__extends(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sizeAndPositionManager=new SizeAndPositionManager({itemCount:t.props.itemCount,itemSizeGetter:function(e){return t.getSize(e)},estimatedItemSize:t.getEstimatedItemSize()}),t.state={offset:t.props.scrollOffset||null!=t.props.scrollToIndex&&t.getOffsetForIndex(t.props.scrollToIndex)||0,scrollChangeReason:SCROLL_CHANGE_REQUESTED},t.styleCache={},t.handleScroll=function(e){var r=t.props.onScroll,n=t.getNodeOffset();n<0||t.state.offset===n||e.target!==t.rootNode||(t.setState({offset:n,scrollChangeReason:SCROLL_CHANGE_OBSERVED}),"function"==typeof r&&r(n,e))},t.getRef=function(e){t.rootNode=e},t}return t.prototype.componentDidMount=function(){var e=this.props,t=e.scrollOffset,r=e.scrollToIndex;null!=t?this.scrollTo(t):null!=r&&this.scrollTo(this.getOffsetForIndex(r))},t.prototype.componentWillReceiveProps=function(e){var t=this.props,r=t.estimatedItemSize,n=t.itemCount,o=t.itemSize,i=t.scrollOffset,s=t.scrollToAlignment,a=t.scrollToIndex,l=e.scrollToIndex!==a||e.scrollToAlignment!==s,u=e.itemCount!==n||e.itemSize!==o||e.estimatedItemSize!==r;e.itemCount===n&&e.estimatedItemSize===r||this.sizeAndPositionManager.updateConfig({itemCount:e.itemCount,estimatedItemSize:this.getEstimatedItemSize(e)}),u&&this.recomputeSizes(),e.scrollOffset!==i?this.setState({offset:e.scrollOffset||0,scrollChangeReason:SCROLL_CHANGE_REQUESTED}):"number"==typeof e.scrollToIndex&&(l||u)&&this.setState({offset:this.getOffsetForIndex(e.scrollToIndex,e.scrollToAlignment,e.itemCount),scrollChangeReason:SCROLL_CHANGE_REQUESTED})},t.prototype.componentDidUpdate=function(e,t){var r=this.state,n=r.offset,o=r.scrollChangeReason;t.offset!==n&&o===SCROLL_CHANGE_REQUESTED&&this.scrollTo(n)},t.prototype.getEstimatedItemSize=function(e){return void 0===e&&(e=this.props),e.estimatedItemSize||"number"==typeof e.itemSize&&e.itemSize||50},t.prototype.getNodeOffset=function(){var e=this.props.scrollDirection,t=void 0===e?DIRECTION_VERTICAL:e;return this.rootNode[scrollProp[t]]},t.prototype.scrollTo=function(e){var t=this.props.scrollDirection,r=void 0===t?DIRECTION_VERTICAL:t;this.rootNode[scrollProp[r]]=e},t.prototype.getOffsetForIndex=function(e,t,r){void 0===t&&(t=this.props.scrollToAlignment),void 0===r&&(r=this.props.itemCount);var n=this.props.scrollDirection,o=void 0===n?DIRECTION_VERTICAL:n;return(e<0||e>=r)&&(e=0),this.sizeAndPositionManager.getUpdatedOffsetForIndex({align:t,containerSize:this.props[sizeProp[o]],currentOffset:this.state&&this.state.offset||0,targetIndex:e})},t.prototype.getSize=function(e){var t=this.props.itemSize;return"function"==typeof t?t(e):Array.isArray(t)?t[e]:t},t.prototype.getStyle=function(e){var t=this.styleCache[e];if(t)return t;var r=this.props.scrollDirection,n=void 0===r?DIRECTION_VERTICAL:r,o=this.sizeAndPositionManager.getSizeAndPositionForIndex(e),i=o.size,s=o.offset;return this.styleCache[e]=__assign({},STYLE_ITEM,(a={},a[sizeProp[n]]=i,a[positionProp[n]]=s,a));var a},t.prototype.recomputeSizes=function(e){void 0===e&&(e=0),this.styleCache={},this.sizeAndPositionManager.resetItem(e)},t.prototype.render=function(){var e=this.props,t=(e.estimatedItemSize,e.height),r=e.overscanCount,n=void 0===r?3:r,o=e.renderItem,i=(e.itemCount,e.itemSize,e.onItemsRendered),s=(e.onScroll,e.scrollDirection),a=void 0===s?DIRECTION_VERTICAL:s,l=(e.scrollOffset,e.scrollToIndex,e.scrollToAlignment,e.style),u=e.width,c=__rest(e,["estimatedItemSize","height","overscanCount","renderItem","itemCount","itemSize","onItemsRendered","onScroll","scrollDirection","scrollOffset","scrollToIndex","scrollToAlignment","style","width"]),p=this.state.offset,f=this.sizeAndPositionManager.getVisibleRange({containerSize:this.props[sizeProp[a]]||0,offset:p,overscanCount:n}),d=f.start,h=f.stop,_=[];if(void 0!==d&&void 0!==h){for(var y=d;y<=h;y++)_.push(o({index:y,style:this.getStyle(y)}));"function"==typeof i&&i({startIndex:d,stopIndex:h})}return React.createElement("div",__assign({ref:this.getRef},c,{onScroll:this.handleScroll,style:__assign({},STYLE_WRAPPER,l,{height:t,width:u})}),React.createElement("div",{style:__assign({},STYLE_INNER,(m={},m[sizeProp[a]]=this.sizeAndPositionManager.getTotalSize(),m))},_));var m},t.defaultProps={overscanCount:3,scrollDirection:DIRECTION_VERTICAL,width:"100%"},t.propTypes={estimatedItemSize:PropTypes.number,height:PropTypes.oneOfType([PropTypes.number,PropTypes.string]).isRequired,itemCount:PropTypes.number.isRequired,itemSize:PropTypes.oneOfType([PropTypes.number,PropTypes.array,PropTypes.func]).isRequired,onItemsRendered:PropTypes.func,overscanCount:PropTypes.number,renderItem:PropTypes.func.isRequired,scrollOffset:PropTypes.number,scrollToIndex:PropTypes.number,scrollToAlignment:PropTypes.oneOf([ALIGN_AUTO,ALIGN_START,ALIGN_CENTER,ALIGN_END]),scrollDirection:PropTypes.oneOf([DIRECTION_HORIZONTAL,DIRECTION_VERTICAL]).isRequired,width:PropTypes.oneOfType([PropTypes.number,PropTypes.string]).isRequired},t}(React.PureComponent),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},toConsumableArray=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)},isDataObject=function(e,t,r){return"object"===(void 0===e?"undefined":_typeof(e))&&e.hasOwnProperty(t)&&e.hasOwnProperty(r)},generateGuid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},lodash_isequal=createCommonjsModule(function(e,t){var r=200,n="__lodash_hash_undefined__",o=1,i=2,s=9007199254740991,a="[object Arguments]",l="[object Array]",u="[object AsyncFunction]",c="[object Boolean]",p="[object Date]",f="[object Error]",d="[object Function]",h="[object GeneratorFunction]",_="[object Map]",y="[object Number]",m="[object Null]",b="[object Object]",v="[object Promise]",g="[object Proxy]",T="[object RegExp]",O="[object Set]",I="[object String]",S="[object Symbol]",C="[object Undefined]",P="[object WeakMap]",A="[object ArrayBuffer]",R="[object DataView]",E=/^\[object .+?Constructor\]$/,j=/^(?:0|[1-9]\d*)$/,z={};z["[object Float32Array]"]=z["[object Float64Array]"]=z["[object Int8Array]"]=z["[object Int16Array]"]=z["[object Int32Array]"]=z["[object Uint8Array]"]=z["[object Uint8ClampedArray]"]=z["[object Uint16Array]"]=z["[object Uint32Array]"]=!0,z[a]=z[l]=z[A]=z[c]=z[R]=z[p]=z[f]=z[d]=z[_]=z[y]=z[b]=z[T]=z[O]=z[I]=z[P]=!1;var x="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,w="object"==typeof self&&self&&self.Object===Object&&self,N=x||w||Function("return this")(),D=t&&!t.nodeType&&t,L=D&&e&&!e.nodeType&&e,k=L&&L.exports===D,M=k&&x.process,V=function(){try{return M&&M.binding&&M.binding("util")}catch(e){}}(),F=V&&V.isTypedArray;function G(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function K(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function H(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var q,U,B=Array.prototype,$=Function.prototype,W=Object.prototype,Y=N["__core-js_shared__"],Q=$.toString,Z=W.hasOwnProperty,X=function(){var e=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),J=W.toString,ee=RegExp("^"+Q.call(Z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=k?N.Buffer:void 0,re=N.Symbol,ne=N.Uint8Array,oe=W.propertyIsEnumerable,ie=B.splice,se=re?re.toStringTag:void 0,ae=Object.getOwnPropertySymbols,le=te?te.isBuffer:void 0,ue=(q=Object.keys,U=Object,function(e){return q(U(e))}),ce=Me(N,"DataView"),pe=Me(N,"Map"),fe=Me(N,"Promise"),de=Me(N,"Set"),he=Me(N,"WeakMap"),_e=Me(Object,"create"),ye=Ke(ce),me=Ke(pe),be=Ke(fe),ve=Ke(de),ge=Ke(he),Te=re?re.prototype:void 0,Oe=Te?Te.valueOf:void 0;function Ie(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ie.prototype.clear=function(){this.__data__=_e?_e(null):{},this.size=0},Ie.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ie.prototype.get=function(e){var t=this.__data__;if(_e){var r=t[e];return r===n?void 0:r}return Z.call(t,e)?t[e]:void 0},Ie.prototype.has=function(e){var t=this.__data__;return _e?void 0!==t[e]:Z.call(t,e)},Ie.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=_e&&void 0===t?n:t,this};function Se(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Se.prototype.clear=function(){this.__data__=[],this.size=0},Se.prototype.delete=function(e){var t=this.__data__,r=Ee(t,e);return!(r<0||(r==t.length-1?t.pop():ie.call(t,r,1),--this.size,0))},Se.prototype.get=function(e){var t=this.__data__,r=Ee(t,e);return r<0?void 0:t[r][1]},Se.prototype.has=function(e){return Ee(this.__data__,e)>-1},Se.prototype.set=function(e,t){var r=this.__data__,n=Ee(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};function Ce(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ce.prototype.clear=function(){this.size=0,this.__data__={hash:new Ie,map:new(pe||Se),string:new Ie}},Ce.prototype.delete=function(e){var t=ke(this,e).delete(e);return this.size-=t?1:0,t},Ce.prototype.get=function(e){return ke(this,e).get(e)},Ce.prototype.has=function(e){return ke(this,e).has(e)},Ce.prototype.set=function(e,t){var r=ke(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function Pe(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Ce;++t<r;)this.add(e[t])}Pe.prototype.add=Pe.prototype.push=function(e){return this.__data__.set(e,n),this},Pe.prototype.has=function(e){return this.__data__.has(e)};function Ae(e){var t=this.__data__=new Se(e);this.size=t.size}Ae.prototype.clear=function(){this.__data__=new Se,this.size=0},Ae.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Ae.prototype.get=function(e){return this.__data__.get(e)},Ae.prototype.has=function(e){return this.__data__.has(e)},Ae.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Se){var o=n.__data__;if(!pe||o.length<r-1)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new Ce(o)}return n.set(e,t),this.size=n.size,this};function Re(e,t){var r=Ue(e),n=!r&&qe(e),o=!r&&!n&&Be(e),i=!r&&!n&&!o&&Xe(e),s=r||n||o||i,a=s?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],l=a.length;for(var u in e)!t&&!Z.call(e,u)||s&&("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Ge(u,l))||a.push(u);return a}function Ee(e,t){for(var r=e.length;r--;)if(He(e[r][0],t))return r;return-1}function je(e){return null==e?void 0===e?C:m:se&&se in Object(e)?function(e){var t=Z.call(e,se),r=e[se];try{e[se]=void 0;var n=!0}catch(e){}var o=J.call(e);n&&(t?e[se]=r:delete e[se]);return o}(e):(t=e,J.call(t));var t}function ze(e){return Qe(e)&&je(e)==a}function xe(e,t,r,n,s){return e===t||(null==e||null==t||!Qe(e)&&!Qe(t)?e!=e&&t!=t:function(e,t,r,n,s,u){var d=Ue(e),h=Ue(t),m=d?l:Fe(e),v=h?l:Fe(t),g=(m=m==a?b:m)==b,C=(v=v==a?b:v)==b,P=m==v;if(P&&Be(e)){if(!Be(t))return!1;d=!0,g=!1}if(P&&!g)return u||(u=new Ae),d||Xe(e)?De(e,t,r,n,s,u):function(e,t,r,n,s,a,l){switch(r){case R:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case A:return!(e.byteLength!=t.byteLength||!a(new ne(e),new ne(t)));case c:case p:case y:return He(+e,+t);case f:return e.name==t.name&&e.message==t.message;case T:case I:return e==t+"";case _:var u=K;case O:var d=n&o;if(u||(u=H),e.size!=t.size&&!d)return!1;var h=l.get(e);if(h)return h==t;n|=i,l.set(e,t);var m=De(u(e),u(t),n,s,a,l);return l.delete(e),m;case S:if(Oe)return Oe.call(e)==Oe.call(t)}return!1}(e,t,m,r,n,s,u);if(!(r&o)){var E=g&&Z.call(e,"__wrapped__"),j=C&&Z.call(t,"__wrapped__");if(E||j){var z=E?e.value():e,x=j?t.value():t;return u||(u=new Ae),s(z,x,r,n,u)}}if(!P)return!1;return u||(u=new Ae),function(e,t,r,n,i,s){var a=r&o,l=Le(e),u=l.length,c=Le(t).length;if(u!=c&&!a)return!1;for(var p=u;p--;){var f=l[p];if(!(a?f in t:Z.call(t,f)))return!1}var d=s.get(e);if(d&&s.get(t))return d==t;var h=!0;s.set(e,t),s.set(t,e);for(var _=a;++p<u;){f=l[p];var y=e[f],m=t[f];if(n)var b=a?n(m,y,f,t,e,s):n(y,m,f,e,t,s);if(!(void 0===b?y===m||i(y,m,r,n,s):b)){h=!1;break}_||(_="constructor"==f)}if(h&&!_){var v=e.constructor,g=t.constructor;v!=g&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof g&&g instanceof g)&&(h=!1)}return s.delete(e),s.delete(t),h}(e,t,r,n,s,u)}(e,t,r,n,xe,s))}function we(e){if(!Ye(e)||(t=e,X&&X in t))return!1;var t;return($e(e)?ee:E).test(Ke(e))}function Ne(e){if(!function(e){var t=e&&e.constructor,r="function"==typeof t&&t.prototype||W;return e===r}(e))return ue(e);var t=[];for(var r in Object(e))Z.call(e,r)&&"constructor"!=r&&t.push(r);return t}function De(e,t,r,n,s,a){var l=r&o,u=e.length,c=t.length;if(u!=c&&!(l&&c>u))return!1;var p=a.get(e);if(p&&a.get(t))return p==t;var f=-1,d=!0,h=r&i?new Pe:void 0;for(a.set(e,t),a.set(t,e);++f<u;){var _=e[f],y=t[f];if(n)var m=l?n(y,_,f,t,e,a):n(_,y,f,e,t,a);if(void 0!==m){if(m)continue;d=!1;break}if(h){if(!G(t,function(e,t){if(o=t,!h.has(o)&&(_===e||s(_,e,r,n,a)))return h.push(t);var o})){d=!1;break}}else if(_!==y&&!s(_,y,r,n,a)){d=!1;break}}return a.delete(e),a.delete(t),d}function Le(e){return function(e,t,r){var n=t(e);return Ue(e)?n:function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}(n,r(e))}(e,Je,Ve)}function ke(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function Me(e,t){var r,n,o=(r=e,n=t,null==r?void 0:r[n]);return we(o)?o:void 0}var Ve=ae?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var s=e[r];t(s,r,e)&&(i[o++]=s)}return i}(ae(e),function(t){return oe.call(e,t)}))}:function(){return[]},Fe=je;(ce&&Fe(new ce(new ArrayBuffer(1)))!=R||pe&&Fe(new pe)!=_||fe&&Fe(fe.resolve())!=v||de&&Fe(new de)!=O||he&&Fe(new he)!=P)&&(Fe=function(e){var t=je(e),r=t==b?e.constructor:void 0,n=r?Ke(r):"";if(n)switch(n){case ye:return R;case me:return _;case be:return v;case ve:return O;case ge:return P}return t});function Ge(e,t){return!!(t=null==t?s:t)&&("number"==typeof e||j.test(e))&&e>-1&&e%1==0&&e<t}function Ke(e){if(null!=e){try{return Q.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function He(e,t){return e===t||e!=e&&t!=t}var qe=ze(function(){return arguments}())?ze:function(e){return Qe(e)&&Z.call(e,"callee")&&!oe.call(e,"callee")},Ue=Array.isArray;var Be=le||function(){return!1};function $e(e){if(!Ye(e))return!1;var t=je(e);return t==d||t==h||t==u||t==g}function We(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=s}function Ye(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Qe(e){return null!=e&&"object"==typeof e}var Ze,Xe=F?(Ze=F,function(e){return Ze(e)}):function(e){return Qe(e)&&We(e.length)&&!!z[je(e)]};function Je(e){return null!=(t=e)&&We(t.length)&&!$e(t)?Re(e):Ne(e);var t}e.exports=function(e,t){return xe(e,t)}}),isEmptyValue=function(e){return null===e||void 0===e||Array.isArray(e)&&!e.length},Button=function(e){inherits(t,e);function t(e){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return createClass(t,[{key:"render",value:function(){var e=this.props,t=e.placeholder,r=e.value,n=e.numberDisplayed,o=e.multiple,i=e.valueKey,s=e.labelKey,a="";if(isEmptyValue(this.props.value))a=t;else if(Array.isArray(r)&&o)a=r.length<=n?r.map(function(e){return isDataObject(e,i,s)?e[s]:e}).join(", "):r.length+" selected";else{var l=Array.isArray(r)?r[0]:r;a=isDataObject(l,i,s)?l[s]:l}return React__default.createElement("button",{id:this.props.id,type:"button",className:"picky__input",onClick:this.props.onClick},React__default.createElement("span",{className:"picky__placeholder"},a))}}]),t}(React__default.PureComponent);Button.defaultProps={placeholder:"None selected"},Button.propTypes={onClick:PropTypes__default.func,id:PropTypes__default.string.isRequired,placeholder:PropTypes__default.string,value:PropTypes__default.oneOfType([PropTypes__default.array,PropTypes__default.string,PropTypes__default.number,PropTypes__default.object]),numberDisplayed:PropTypes__default.number,multiple:PropTypes__default.bool,valueKey:PropTypes__default.string,labelKey:PropTypes__default.string};var Filter=function(e){inherits(t,e);function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return createClass(t,[{key:"render",value:function(){var e=this;return React__default.createElement("div",{className:"picky__filter"},React__default.createElement("input",{type:"text",className:"picky__filter__input",placeholder:"Filter...",tabIndex:this.props.tabIndex,"aria-label":"filter options",onChange:function(t){return e.props.onFilterChange(t.target.value)}}))}}]),t}(React.Component);Filter.propTypes={onFilterChange:PropTypes__default.func.isRequired,tabIndex:PropTypes__default.number};var Option=function(e){var t=e.id,r=e.item,n=e.isSelected,o=e.labelKey,i=e.valueKey,s=e.selectValue,a=e.style,l=e.multiple,u=e.tabIndex,c=n?"option selected":"option",p=isDataObject(r,o,i)?r[o]:r,f=l?"checkbox":"radio",d=function(){return s(r)};return React__default.createElement("div",{tabIndex:u,id:t,role:"option",style:a,"aria-selected":n,className:c,onClick:d,onKeyPress:function(e){e.preventDefault(),s(r)}},React__default.createElement("input",{type:f,readOnly:!0,onClick:d,tabIndex:-1,checked:n,"aria-label":p}),p)};Option.propTypes={isSelected:PropTypes__default.bool,valueKey:PropTypes__default.string,labelKey:PropTypes__default.string,id:PropTypes__default.string,item:PropTypes__default.oneOfType([PropTypes__default.string,PropTypes__default.number,PropTypes__default.object]).isRequired,style:PropTypes__default.object,selectValue:PropTypes__default.func.isRequired,multiple:PropTypes__default.bool,tabIndex:PropTypes__default.oneOfType([PropTypes__default.string,PropTypes__default.number])};var Drawer=function(e){inherits(t,e);function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return createClass(t,[{key:"render",value:function(){var e=this.props,t=e.open,r=e.id;return t?React__default.createElement("div",{className:"picky__dropdown",id:r},React__default.createElement("div",null,this.props.children)):null}}]),t}(React__default.Component);Drawer.propTypes={id:PropTypes__default.string,open:PropTypes__default.bool,children:PropTypes__default.element};var Picky$1=function(e){inherits(t,e);function t(e){classCallCheck(this,t);var r=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={selectedValue:e.value||(e.multiple?[]:null),open:e.open,filtered:!1,filteredOptions:[],id:generateGuid(),allSelected:!1},r.toggleDropDown=r.toggleDropDown.bind(r),r.selectAll=r.selectAll.bind(r),r.onFilterChange=r.onFilterChange.bind(r),r.selectValue=r.selectValue.bind(r),r.allSelected=r.allSelected.bind(r),r.handleOutsideClick=r.handleOutsideClick.bind(r),r}return createClass(t,[{key:"componentDidMount",value:function(){var e=this.allSelected();this.setState({allSelected:e})}},{key:"componentWillReceiveProps",value:function(e){this.props.options===e.options&&this.state.selectedValue===e.value||this.setState({allSelected:this.allSelected()})}},{key:"selectValue",value:function(e){var t=this,r=this.isControlled()?this.props.value:this.state.selectedValue;if(this.props.multiple&&Array.isArray(r))if(r.includes(e)){var n=r.indexOf(e);this.setState({selectedValue:[].concat(toConsumableArray(r.slice(0,n)),toConsumableArray(r.slice(n+1)))},function(){t.props.onChange(t.state.selectedValue)})}else this.setState({selectedValue:[].concat(toConsumableArray(this.state.selectedValue),[e])},function(){t.props.onChange(t.state.selectedValue)});else this.setState({selectedValue:e},function(){t.props.onChange(t.state.selectedValue)})}},{key:"allSelected",value:function(){var e=this.state.selectedValue,t=this.props.options.slice(0),r=Array.isArray(e)?e.slice(0):[];return lodash_isequal(t,r)}},{key:"selectAll",value:function(){var e=this;this.setState({selectedValue:this.state.allSelected?[]:this.props.options,allSelected:!this.state.allSelected},function(){e.props.onChange(e.state.selectedValue)})}},{key:"isControlled",value:function(){return null!=this.props.value}},{key:"renderOptions",value:function(){var e=this,t=this.props,r=t.options,n=t.value,o=t.dropdownHeight,i=t.labelKey,s=t.valueKey,a=t.itemHeight,l=t.multiple,u=t.tabIndex,c=this.state.filtered?this.state.filteredOptions:r;return React__default.createElement(VirtualList,{width:"100%",height:o,itemCount:c.length,itemSize:a,renderItem:function(t){var r=t.index,o=t.style,a=c[r],p=isDataObject(a,i,s)?a[s]:a,f=!1;return f=e.isControlled()?Array.isArray(n)&&n.includes(a)||!Array.isArray(n)&&n===a:Array.isArray(e.state.selectedValue)&&e.state.selectedValue.includes(a)||!Array.isArray(e.state.selectedValue)&&e.state.selectedValue===a,"function"==typeof e.props.render?e.props.render({style:o,item:a,isSelected:f,selectValue:e.selectValue,labelKey:i,valueKey:s,multiple:l}):React__default.createElement(Option,{key:p,style:o,item:a,isSelected:f,selectValue:e.selectValue,labelKey:i,valueKey:s,multiple:l,tabIndex:u,id:e.state.id+"-option-"+r})}})}},{key:"onFilterChange",value:function(e){var t=this;if(!e.trim())return this.setState({filtered:!1,filteredOptions:[]});var r=this.props.options.filter(function(r){return isDataObject(r,t.props.labelKey,t.props.valueKey)?String(r[t.props.labelKey]).toLowerCase().includes(e.toLowerCase()):String(r).toLowerCase().includes(e.toLowerCase())});this.setState({filtered:!0,filteredOptions:r},function(){t.props.onFiltered&&t.props.onFiltered(r)})}},{key:"handleOutsideClick",value:function(e){var t=this.props.keepOpen||this.props.multiple;this.node&&this.node.contains(e.target)&&t||this.toggleDropDown()}},{key:"toggleDropDown",value:function(){var e=this;this.state.open?document.removeEventListener("click",this.handleOutsideClick,!1):document.addEventListener("click",this.handleOutsideClick,!1),this.setState({open:!this.state.open},function(){var t=e.state.open;t&&e.props.onOpen?e.props.onOpen():!t&&e.props.onClose&&e.props.onClose()})}},{key:"defaultLayout",value:function(){var e=this.props,t=e.placeholder,r=e.value,n=e.multiple,o=e.numberDisplayed,i=e.includeSelectAll,s=e.includeFilter,a=e.filterDebounce,l=e.valueKey,u=e.labelKey,c=e.tabIndex;return React__default.createElement("div",null,React__default.createElement(Button,{id:this.state.id+"__button",placeholder:t,value:this.isControlled()?r:this.state.selectedValue,multiple:n,numberDisplayed:o,valueKey:l,labelKey:u,onClick:this.toggleDropDown}),this.state.open&&React__default.createElement(Drawer,{open:this.state.open,id:this.state.id+"__dropdown"},React__default.createElement("div",null,s&&React__default.createElement(Filter,{onFilterChange:a>0?lodash_debounce(this.onFilterChange,a):this.onFilterChange}),i&&n&&!this.state.filtered&&React__default.createElement("div",{tabIndex:c,role:"option",id:this.state.id+"-option-selectall","data-selectall":"true","aria-selected":this.state.allSelected,className:this.state.allSelected?"option selected":"option",onClick:this.selectAll,onKeyPress:this.selectAll},React__default.createElement("input",{type:"checkbox",readOnly:!0,onClick:this.selectAll,tabIndex:-1,checked:this.state.allSelected,"aria-label":"select all"}),"Select All"),this.renderOptions())))}},{key:"render",value:function(){var e=this,t=this.props.tabIndex,r=this.state.open,n="";return r&&(n+=this.state.id+"-list"),React__default.createElement("div",{ref:function(t){e.node=t},className:"picky",id:this.state.id,role:"combobox","aria-controls":this.state.id+"__button","aria-expanded":r,"aria-haspopup":r,"aria-owns":n,tabIndex:t},this.props.children?null:this.defaultLayout())}}]),t}(React__default.PureComponent);Picky$1.Button=Button,Picky$1.defaultProps={numberDisplayed:3,options:[],filterDebounce:150,dropdownHeight:300,onChange:function(){},itemHeight:35,tabIndex:0,keepOpen:!0},Picky$1.propTypes={children:PropTypes__default.element,placeholder:PropTypes__default.string,value:PropTypes__default.oneOfType([PropTypes__default.array,PropTypes__default.string,PropTypes__default.number,PropTypes__default.object]),numberDisplayed:PropTypes__default.number,multiple:PropTypes__default.bool,options:PropTypes__default.array.isRequired,onChange:PropTypes__default.func.isRequired,open:PropTypes__default.bool,includeSelectAll:PropTypes__default.bool,includeFilter:PropTypes__default.bool,filterDebounce:PropTypes__default.number,dropdownHeight:PropTypes__default.number,onFiltered:PropTypes__default.func,onOpen:PropTypes__default.func,onClose:PropTypes__default.func,valueKey:PropTypes__default.string,labelKey:PropTypes__default.string,render:PropTypes__default.func,itemHeight:PropTypes__default.number,tabIndex:PropTypes__default.oneOfType([PropTypes__default.string,PropTypes__default.number]),keepOpen:PropTypes__default.bool},module.exports=Picky$1;
